var slider=document.querySelector(".slider"),sliderDots=document.querySelectorAll(".slider__dot"),slides=document.querySelectorAll(".slider__slide"),sliderControls=document.querySelectorAll(".slider__control"),catalog=document.querySelector("#catalog"),serviceBtns=document.querySelectorAll(".services__btn"),serviceSlides=document.querySelectorAll(".services__item"),mapModal=document.querySelector("#map-modal"),mapOpen=document.querySelector("#map-open"),mapClose=document.querySelector("#map-close"),map=document.querySelector("#map-modal__frame"),formModal=document.querySelector("#form-modal"),formOpen=document.querySelector("#form-open"),formClose=document.querySelector("#form-close"),formModalInner=document.querySelector(".form-modal"),form=document.querySelector(".form-modal__form"),buyBtns=document.querySelectorAll(".product__buy-btn"),cartModal=document.querySelector("#cart-modal"),cartClose=document.querySelector("#cart-close"),cartContinue=document.querySelector(".cart-modal__continue"),rangeSlider=document.querySelector("#range-slider");if(slider){slider.classList.remove("slider--nojs");for(var currentSlide=0,i=0;i<sliderDots.length;i++)clickControl(sliderDots[i],slides[i]),sliderDots[i].setAttribute("data-num",i);function clickControl(t,o){t.addEventListener("click",function(e){toggleSlide(t,o)})}function toggleSlide(e,t){for(var o=0;o<sliderDots.length;o++)sliderDots[o].classList.remove("slider__dot--active"),slides[o].classList.remove("slide--show");currentSlide=+e.dataset.num,e.classList.add("slider__dot--active"),t.classList.add("slide--show")}for(i=0;i<sliderControls.length;i++)sliderControls[i].addEventListener("click",function(e){swipeControl(e.target)});function swipeControl(e){e.classList.contains("slider__control--prev")&&(--currentSlide<0&&(currentSlide=sliderDots.length-1),toggleSlide(sliderDots[currentSlide],slides[currentSlide])),e.classList.contains("slider__control--next")&&(++currentSlide>sliderDots.length-1&&(currentSlide=0),toggleSlide(sliderDots[currentSlide],slides[currentSlide]))}}catalog&&(catalog.addEventListener("focus",function(e){var t=e.target;t.classList.contains("button")&&t.parentNode.classList.add("product__hover--show")},!0),catalog.addEventListener("blur",function(e){var t=e.target;t.classList.contains("button")&&t.parentNode.classList.remove("product__hover--show")},!0));for(i=0;i<serviceBtns.length;i++)clickService(serviceBtns[i],serviceSlides[i]);function clickService(t,o){t.addEventListener("click",function(e){toggleService(t,o)})}function toggleService(e,t){for(var o=0;o<serviceBtns.length;o++)serviceBtns[o].classList.remove("services__btn--active"),serviceSlides[o].classList.remove("services__item--active");e.classList.add("services__btn--active"),t.classList.add("services__item--active")}if(map&&(map.onload=function(){map.style.zIndex=2}),mapModal&&mapOpen.addEventListener("click",function(e){e.preventDefault(),mapModal.classList.remove("modal__inner--appear"),mapModal.classList.add("modal--show"),mapModal.classList.add("modal__inner--appear"),mapClose.focus()}),mapModal&&mapClose.addEventListener("click",function(e){e.preventDefault(),mapModal.classList.remove("modal--show")}),formModal&&formOpen.addEventListener("click",function(e){e.preventDefault(),formModal.classList.remove("modal__inner--appear"),formModalInner.classList.remove("form-modal--invalid"),formModal.classList.add("modal--show"),formModal.classList.add("modal__inner--appear"),formClose.focus()}),formModal&&formClose.addEventListener("click",function(e){e.preventDefault(),formModal.classList.remove("modal--show")}),formModal&&form.addEventListener("submit",function(e){for(var t=[form.elements.name,form.elements.email],o=0;o<t.length;o++)t[o].value&&t[o].validity.valid?t[o].classList.remove("form-modal__input--invalid"):(e.preventDefault(),t[o].classList.add("form-modal__input--invalid"),formModalInner.classList.remove("form-modal--invalid"),formModalInner.offsetWidth,formModalInner.classList.add("form-modal--invalid"))}),buyBtns)for(i=0;i<buyBtns.length;i++)buyBtns[i].addEventListener("click",function(e){e.preventDefault(),cartModal.classList.add("modal--show")});if(cartClose.addEventListener("click",function(e){e.preventDefault(),cartModal.classList.remove("modal--show")}),cartContinue.addEventListener("click",function(e){e.preventDefault(),cartModal.classList.remove("modal--show")}),rangeSlider){var dragElemLeft=document.querySelector(".range-slider__control--left"),dragElemRight=document.querySelector(".range-slider__control--right"),selectedArea=document.querySelector(".range-slider__selected");function getCoords(e){var t=e.getBoundingClientRect();return{top:t.top+pageYOffset,left:t.left+pageXOffset,right:t.right+pageXOffset}}dragElemRight.onmousedown=function(e){var t=getCoords(dragElemRight),l=e.pageX-t.left,s=getCoords(rangeSlider);return document.onmousemove=function(e){var t=e.pageX-l-s.left,o=getCoords(dragElemLeft).right-s.left;t<o&&(t=o);var r=rangeSlider.offsetWidth-dragElemRight.offsetWidth/2;r<t&&(t=r),selectedArea.style.left=o-dragElemLeft.offsetWidth/2+"px",selectedArea.style.width=t-o+dragElemLeft.offsetWidth+"px",dragElemRight.style.left=t+"px"},!(document.onmouseup=function(){document.onmousemove=document.onmouseup=null})},dragElemRight.ondragstart=function(){return!1},dragElemLeft.onmousedown=function(e){var t=getCoords(dragElemLeft),r=e.pageX-t.left,l=getCoords(rangeSlider);return document.onmousemove=function(e){var t=e.pageX-r-l.left;t<-dragElemLeft.offsetWidth/2&&(t=-dragElemLeft.offsetWidth/2);var o=getCoords(dragElemRight).left-l.left-dragElemRight.offsetWidth;o<t&&(t=o),selectedArea.style.left=t+dragElemLeft.offsetWidth/2+"px",selectedArea.style.width=o-t+dragElemLeft.offsetWidth+"px",dragElemLeft.style.left=t+"px"},!(document.onmouseup=function(){document.onmousemove=document.onmouseup=null})},dragElemLeft.ondragstart=function(){return!1}}